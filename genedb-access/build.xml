<?xml version="1.0"?>

<project name="genedb-access" default="genedb-access.jar" basedir=".">

	<target name="get-latest-jars" depends="" 
		description="Copy over JAR files from other projects">
		<copy file="../genedb-db/ant-build/jars/genedb-hibernate.jar" todir="lib" />
		<copy file="../genedb-db/ant-build/jars/chado-interface.jar" todir="lib" />
	</target>
	
	<target name="compile">
		<javac srcdir="src" destdir="ant-build/classes">
			<classpath path="lib/chado-interface.jar"/>
		</javac>
	</target>
	
	<target name="genedb-access.jar" depends="compile" description="Create JAR file">
		<delete file="genedb-access.jar"/>

		<copy todir="ant-build/jar">
			<fileset dir="ant-build/classes" />
			<fileset dir="resources" />
		</copy>
		
		<jar jarfile="genedb-access.jar">
			<fileset dir="ant-build/jar" />
			<manifest>
				<attribute name="Implementation-Title" value="GeneDB Loading"/>
				<attribute name="Implementation-Version" value="0.1"/>
				<attribute name="Main-class" value="org.genedb.db.loading.NewRunner" />
			</manifest>
		</jar>
	</target>
	
	<path id="exec-classpath">
		<fileset dir="lib" />
		<fileset file="genedb-access.jar" />
	</path>
	
	<target name="load-spombe" depends="genedb-access.jar">
		<java fork="true" classpathref="exec-classpath" classname="org.genedb.db.loading.NewRunner">
			<arg line="spombe /nfs/pathdb/work/pathdb/pombe/spombe.config.xml"/>
			<jvmarg line="-server"/>
		</java>
	</target>
	
	<target name="load-twhipplei" depends="genedb-access.jar">
		<java fork="true" classpathref="exec-classpath" classname="org.genedb.db.loading.NewRunner">
			<arg line="twhipplei /nfs/pathdb/prod/data/input/twhipplei/twhipplei.config.xml"/>
			<jvmarg line="-server"/>
		</java>
	</target>
	
	<target name="load-tbrucei" depends="genedb-access.jar">
		<java fork="true" classpathref="exec-classpath" classname="org.genedb.db.loading.NewRunner">
			<arg line="tbrucei /nfs/pathdb/prod/data/input/tryp/tbrucei.config.xml"/>
			<jvmarg line="-server"/>
		</java>
	</target>
	
	<target name="load-smansoni" depends="genedb-access.jar">
		<java fork="true" classpathref="exec-classpath" classname="org.genedb.db.loading.NewRunner">
			<arg line="smansoni /nfs/pathdb/prod/data/input/smansoni/smansoni.config.xml"/>
			<jvmarg line="-server"/>
		</java>
	</target>
	
	<target name="load-pfalciparum" depends="genedb-access.jar">
		<java fork="true" classpathref="exec-classpath" classname="org.genedb.db.loading.NewRunner">
			<arg line="pfalciparum /nfs/pathdb/prod/data/input/malaria/pfalciparum.config.xml"/>
			<jvmarg line="-server"/>
		</java>
	</target>
	
	
</project>
