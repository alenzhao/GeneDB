<project name="Jogra" default="fulljar-Jogra" basedir=".">

    <dirname property="imported.basedir.Jogra" file="${ant.file.Jogra}"/>

    <import file="../genedb-libs/build.xml"/>
    <import file="../genedb-db/build.xml"/>

    <path id="Jogra-classpath">
      <fileset dir="${imported.basedir.Jogra}/lib">
        <include name="*.jar"/>
      </fileset>
      <fileset dir="${imported.basedir.libs}/lib/gui">
        <include name="*.jar"/>
      </fileset>
      <pathelement location="${imported.basedir.libs}/lib/db/postgresql-8.3-603.jdbc4.jar"/>
      <pathelement location="${imported.basedir.db}/${dist.dir}/genedb-db.jar"/>
    </path>

    <target name="init">
        <init project="Jogra" />
    </target>

    <target name="clean">
        <clean-target project="Jogra" />
    </target>

    <target name="jogra-compile" depends="clean, init, genedb-db.fulljar-db">
        <compile-target project="Jogra" />
        <copy todir="${imported.basedir.Jogra}/${classes.dir}">
            <fileset dir="${imported.basedir.Jogra}/conf"/>
        </copy>
    </target>

    <!-- create .jar -->
    <target name="fulljar-Jogra" depends="jogra-compile" description="Create an unsigned JAR">
        <jar-target project="Jogra"/>
    </target>

    <target name="signed-jar-Jogra" depends="fulljar-Jogra" description="Create a signed JAR">
        <signjar jar="${imported.basedir.Jogra}/${dist.dir}/genedb-Jogra.jar"
            signedjar="${imported.basedir.Jogra}/${dist-dir}/Jogra-signed.jar"
            alias="Jogra" storepass="Jogra-pw"/>
    </target>

    <target name="run-Jogra" depends="fulljar-Jogra">
        <java fork="true" classname="org.genedb.jogra.drawing.Jogra">
            <classpath>
                <path refid="Jogra-classpath"/>
                <pathelement location="${imported.basedir.Jogra}/${dist.dir}/genedb-Jogra.jar"/>
            </classpath>
        </java>
    </target>
  </project>