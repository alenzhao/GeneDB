<project name="Jogra" default="jar" basedir=".">

	<dirname property="imported.basedir.Jogra" file="${ant.file.Jogra}"/>
	
	<import file="../genedb-libs/build.xml"/>
	
	<path id="compilepath">
		<path refid="core-libs" />
		<path refid="misc-gui-libs" />
		<path refid="jakarta-commons-lang" />
		<!--<fileset file="../genedb-domain/ant-build/dist/genedb-domain.jar" />-->
		<fileset file="${imported.basedir.Jogra}/../genedb-domain/genedb-domain.jar" />
	</path>
	
	<property name="project_name" value="Jogra" />
	<property name="srcDir" value="src" />
	<property name="jar-file" value="${dist.dir}/${project_name}.jar" />

	<target name="compile">
		<compile classpath-ref="Jogra.compilepath" path="${imported.basedir.Jogra}" />
	</target>
	
    <!-- create .jar -->
    <target name="jar" depends="compile" description="Create an unsigned JAR">
    	<delete file="${imported.basedir.Jogra}/${jar-file}" />
      	<jar jarfile="${imported.basedir.Jogra}/${jar-file}"
			basedir="${imported.basedir.Jogra}/${classes.dir}">
      		<fileset dir="${imported.basedir.Jogra}/conf" />
      		<manifest id="">
      			<attribute name="Version" value="0.1"/>
      		</manifest>
		</jar>
    </target>
	
	<target name="signed-jar" depends="jar" description="Create a signed JAR">
		
		<jar destfile="${imported.basedir.Jogra}/Jogra-tmp.jar" duplicate="preserve">
		    <zipgroupfileset dir="${build.dir}" includes="${jar}"/>
		    <zipgroupfileset dir="${imported.basedir.Jogra}/lib" 
		    	includes="EventBus-1.1.jar, log4j-1.2.9.jar, commons-logging.jar,myswing.jar,swingx-0.9.2.jar,swing-worker.jar,forms-1.1.0.jar,beansbinding-1.2.1.jar,commons-lang-2.3.jar"/>
			<zipgroupfileset dir="${imported.basedir.Jogra}/../genedb-libs/lib/" includes="spring-2.5.4.jar" />
			<zipgroupfileset dir="${imported.basedir.Jogra}/../genedb-domain/" includes="genedb-domain.jar" />
			<zipgroupfileset dir="${imported.basedir.Jogra}/../genedb-db/ant-build/jars" includes="chado-interface.jar" />
		</jar>
		
		<signjar jar="Jogra-tmp.jar" signedjar="${dist-dir}/Jogra-signed.jar" alias="Jogra" storepass="Jogra-pw"/>
		<delete file="Jogra-tmp.jar" />
    </target>


  </project>