<?xml version="1.0"?>

<digester-rules>
	<object-create-rule pattern="schema"
		classname="org.genedb.arttb.sqlt_hibernate.rdbms.Database" />
	<set-properties-rule pattern="catalog">
		<alias attr-name="library" prop-name="library" />
	</set-properties-rule>

	<pattern value="schema/tables/table">
		<object-create-rule
			classname="org.genedb.arttb.sqlt_hibernate.rdbms.Table" />
		<set-properties-rule>
			<alias attr-name="name" prop-name="name" />
		</set-properties-rule>
		<call-method-rule pattern="author" methodname="setAuthor"
			paramcount="0" />
		<call-method-rule pattern="title" methodname="setTitle"
			paramcount="0" />
		<set-next-rule methodname="addTable" />
	</pattern>

	<pattern value="schema/tables/table/fields/field">
		<object-create-rule
			classname="org.genedb.arttb.sqlt_hibernate.rdbms.Field" />
		<set-properties-rule>
			<alias attr-name="name" prop-name="name" />
			<alias attr-name="size" prop-name="size" />
			<alias attr-name="data_type" prop-name="dataType" />
			<alias attr-name="is_nullable" prop-name="nullable" />
			<alias attr-name="is_primary_key" prop-name="primaryKey" />
			<alias attr-name="is_foreign_key" prop-name="foreignKey" />
			<alias attr-name="is_auto_increment" prop-name="autoIncrement" />
			<alias attr-name="default_value" prop-name="defaultValue" />
		</set-properties-rule>
		<call-method-rule pattern="comments" methodname="setComments"
			paramcount="0" />
		<call-method-rule pattern="extra" methodname="setExtra"
			paramcount="0" />
		<set-next-rule methodname="addField" />
	</pattern>

	<pattern value="schema/tables/table/indices/index">
		<object-create-rule
			classname="org.genedb.arttb.sqlt_hibernate.rdbms.Index" />
		<set-properties-rule>
			<alias attr-name="name" prop-name="name" />
			<alias attr-name="fields" prop-name="fields" />
			<alias attr-name="type" prop-name="type" />
			<alias attr-name="options" prop-name="options" />
		</set-properties-rule>
		<set-next-rule methodname="addIndex" />
	</pattern>
	
		<pattern value="schema/tables/table/constraints/constraint">
		<object-create-rule
			classname="org.genedb.arttb.sqlt_hibernate.rdbms.Constraint" />
		<set-properties-rule>
			<alias attr-name="name" prop-name="name" />
			<alias attr-name="fields" prop-name="fields" />
			<alias attr-name="type" prop-name="type" />
			<alias attr-name="options" prop-name="options" />
			<alias attr-name="reference_table" prop-name="referenceTable" />
			<alias attr-name="reference_fields" prop-name="referenceFields" />
			<alias attr-name="on_delete" prop-name="onDelete" />
			<alias attr-name="on_update" prop-name="onUpdate" />
			<alias attr-name="match_type" prop-name="matchType" />
			<alias attr-name="expression" prop-name="expression" />
			<alias attr-name="deferrable" prop-name="deferrable" />
    	private boolean deferrable;
		</set-properties-rule>
		<set-next-rule methodname="addConstraint" />
	</pattern>

</digester-rules>